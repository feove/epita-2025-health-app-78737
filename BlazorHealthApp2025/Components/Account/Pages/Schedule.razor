@page "/schedule"
@using System.Globalization

<h2>Select Your Appointment</h2>

<div class="calendar">
    <div class="calendar-header">
        <button @onclick="PreviousMonth">&#8592;</button>
        <span>@currentDate.ToString("MMMM yyyy", CultureInfo.CurrentCulture)</span>
        <button @onclick="NextMonth">&#8594;</button>
    </div>
    <div class="calendar-grid">
        @foreach (var day in dayNames)
        {
            <div class="calendar-day">@day</div>
        }

        @foreach (var day in Enumerable.Range(1, DateTime.DaysInMonth(currentDate.Year, currentDate.Month)))
        {
            <div class="calendar-date" @onclick="() => SelectDate(day)" style="@GetDayStyle(day)">@day</div>
        }
    </div>
</div>

@code {
    private DateTime currentDate = DateTime.Now;
    private string[] dayNames = CultureInfo.CurrentCulture.DateTimeFormat.AbbreviatedDayNames;
    private int selectedDay = -1;

    private void PreviousMonth() => currentDate = currentDate.AddMonths(-1);
    private void NextMonth() => currentDate = currentDate.AddMonths(1);
    private void SelectDate(int day) => selectedDay = day;

    private string GetDayStyle(int day)
    {
        return day == selectedDay ? "background-color: lightgreen;" : "";
    }
}